kind: ZarfPackageConfig
metadata:
  name: jokes-api
  version: 1
  description: >
    A simple jokes api for demo purpose

constants:
  - name: FULL_IMAGE_NAME
    value: "lemonpro/jokes-api:latest"

variables:
  - name: JAVA_TOOLS_OPTIONS
    description: any jvm configurations can go hear
    default: "-Dserver.port=8080"
    prompt: true
    sensitive: false

components:
  - name: jokes-api
    required: true
    charts:
      - name: jokes-api
        namespace: jokes
        localPath: chart
        version: "1.0.0"
    images:
      - "lemonpro/jokes-api:latest"
    actions:
      onDeploy:
        after:
          - wait:
              cluster:
                kind: Deployment
                name: jokes-api
                namespace: jokes
                condition: Available
